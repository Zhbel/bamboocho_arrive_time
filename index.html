<!DOCTYPE html>
<html>
<body>
<div align="center">
<h1>Bamboocho`s time calculator</h1>
<img src="https://github.com/Zhbel/bamboocho_arrive_time/blob/main/1.png?raw=true" style="height:10%;width:10%">
<span id="clock">
<h2>Текущее время: 
<p id="cdate"></p>
<p id="ctime"></p>
</h2>
</span>
<h2>Сколько ждать Подводного Электрика? (мин)</h2>
<input type="text" style="height:10%;width:20%" id="lolz">
<br>
<br>
<input type="button" onclick="timeCalc()" value="Прибытие усатого" style="height:10%;width:20%">
<br>
<div id="result" style = "display:none">
<h2 id="rest"></h2>
<h2 id="resdate"></h2>
<h2 id="restime"></h2>
<img src="https://github.com/Zhbel/bamboocho_arrive_time/blob/main/2.png?raw=true" style="height:10%;width:10%" id="pic">
<div>
<p id="title2">До прихода адмирала в бухту осталось: <span id="t" style="font-size:20px"></span></p>
</div>
</body>
</html>

<script>
	(function () {
  	function updateClock(){
	let d = new Date();
    	document.getElementById('cdate').innerHTML = d.getDate() + "." + (d.getMonth() + 1) + "." + d.getFullYear();
	if (d.getMinutes()  > 9)
	document.getElementById('ctime').innerHTML = d.getHours() + ':' + d.getMinutes();
	else{
	document.getElementById('ctime').innerHTML = d.getHours() + ':0' + d.getMinutes();
	}
  	}
  	setInterval(function () {
  	updateClock();
  	}, 1000);
	}());

	/* function script(){
	var img = document.getElementById('pic');
	img.style.visibility = "hidden";
	}; */

	function AddMinutesToDate(date, minutes) {
     	return new Date(date.getTime() + minutes*60000);
	}
	
	function timeCalc(){
	let d = new Date();
	var lolz = document.getElementById('lolz').value;
	if(lolz == "") alert("Введи минуты ожидания");
	else{
	
	var img = document.getElementById('result');
	img.style = "display:block";
 	let newd = AddMinutesToDate(d, lolz * 2.63);
	time(newd);
	//console.log(newd.getHours() + ":" + newd.getMinutes());
	document.getElementById('rest').innerHTML = "Бамблби явится:"
	document.getElementById('resdate').innerHTML = newd.getDate() + "." + (newd.getMonth() + 1) + "." + newd.getFullYear();
	if (newd.getMinutes()  > 9)
	document.getElementById('restime').innerHTML = newd.getHours() + ':' + newd.getMinutes();
	else{
	document.getElementById('restime').innerHTML = newd.getHours() + ':0' + newd.getMinutes();
	}
	}
	}

	function time(timeend) {
	today = new Date();
	today = Math.floor((timeend-today)/1000);
	tsec=today%60; today=Math.floor(today/60); if(tsec<10)tsec='0'+tsec;
	tmin=today%60; today=Math.floor(today/60); if(tmin<10)tmin='0'+tmin;
	thour=today%24; today=Math.floor(today/24);
	timestr=today +" дней "+ thour+" часов "+tmin+" минут "+tsec+" секунд";
	document.getElementById('t').innerHTML=timestr;
	setInterval(function () {
  	time(timeend);
  	}, 1000);
	}
</script>

